[
  {
    "id": "2.01",
    "category": "schema",
    "description": "Create Tag model in Prisma schema",
    "steps": [
      "Add Tag model to prisma/schema.prisma with fields: id, name, slug (unique)",
      "Run prisma generate",
      "Run prisma migrate dev --name add_tag",
      "Verify with pnpm tsc --noEmit"
    ],
    "passes": true
  },
  {
    "id": "2.02",
    "category": "schema",
    "description": "Create Course model in Prisma schema",
    "steps": [
      "Add Course model with fields from product-plan/sections/landing-and-cat-logo/types.ts",
      "Include: id, slug (unique), title, type (enum), modality (enum), description, startDate, endDate, duration, maxCapacity, enrolledCount, priceUSD, location, address, imageUrl, status (enum), educatorId (relation to Educator)",
      "Create CourseType enum: wset, taller, cata, curso",
      "Create CourseModality enum: presencial, online",
      "Create CourseStatus enum: announced, enrolling, full, in_progress, finished, available",
      "Run prisma generate and prisma migrate dev --name add_course",
      "Verify with pnpm tsc --noEmit"
    ],
    "passes": true
  },
  {
    "id": "2.03",
    "category": "schema",
    "description": "Create Course-Tag many-to-many relation",
    "steps": [
      "Add tags relation to Course model (many-to-many with Tag)",
      "Add courses relation to Tag model",
      "Use implicit many-to-many or explicit join table",
      "Run prisma generate and prisma migrate dev --name add_course_tag_relation",
      "Verify with pnpm tsc --noEmit"
    ],
    "passes": true
  },
  {
    "id": "2.04",
    "category": "schema",
    "description": "Add wsetLevel field to Course model",
    "steps": [
      "Add optional wsetLevel field to Course (Int, nullable)",
      "Only applicable when type is 'wset'",
      "Run prisma generate and prisma migrate dev --name add_wset_level",
      "Verify with pnpm tsc --noEmit"
    ],
    "passes": true
  },
  {
    "id": "2.05",
    "category": "schema",
    "description": "Create NewsletterSubscription model",
    "steps": [
      "Add NewsletterSubscription model: id, email (unique), subscribedAt, isActive",
      "Run prisma generate and prisma migrate dev --name add_newsletter",
      "Verify with pnpm tsc --noEmit"
    ],
    "passes": true
  },
  {
    "id": "2.06",
    "category": "data",
    "description": "Create seed script with sample courses, tags, and educators",
    "steps": [
      "Create prisma/seed.ts script",
      "Add 2-3 educators with realistic wine education profiles",
      "Add 5-6 tags: WSET, Vinos Argentinos, Cata, Maridaje, etc.",
      "Add 4-5 courses mixing types and modalities (reference sample-data.json)",
      "Add seed script to package.json",
      "Run seed and verify data in Prisma Studio"
    ],
    "passes": true
  },
  {
    "id": "2.07",
    "category": "api",
    "description": "Create course-service with filtering logic",
    "steps": [
      "Create src/services/course-service.ts",
      "Implement getCourses, getUpcomingCourses, getPastCourses functions",
      "Support filters: modality, type, tagIds",
      "Separate upcoming (future startDate or status=available) from past courses",
      "Verify with pnpm tsc --noEmit"
    ],
    "passes": true
  },
  {
    "id": "2.08",
    "category": "api",
    "description": "Create tag-service",
    "steps": [
      "Create src/services/tag-service.ts",
      "Implement getTags function",
      "Verify with pnpm tsc --noEmit"
    ],
    "passes": true
  },
  {
    "id": "2.09",
    "category": "api",
    "description": "Create newsletter-service and server action",
    "steps": [
      "Create src/services/newsletter-service.ts with subscribe function",
      "Create src/app/(public)/actions.ts with subscribeToNewsletter server action",
      "Validate email format with Zod in server action",
      "Handle duplicate emails gracefully",
      "Verify with pnpm tsc --noEmit"
    ],
    "passes": true
  },
  {
    "id": "2.10",
    "category": "ui",
    "description": "Copy and adapt all landing UI components from product-plan",
    "steps": [
      "Create src/types/landing.ts - copy types from product-plan/sections/landing-and-cat-logo/types.ts, adapt to work with Prisma types",
      "Create src/components/landing/ directory",
      "Copy and adapt CourseCard.tsx - update imports to use project's UI components",
      "Copy and adapt CourseCatalog.tsx - ensure it uses local CourseCard",
      "Copy and adapt Hero.tsx - use placeholder image/gradient instead of video for now",
      "Copy and adapt Footer.tsx - update imports",
      "Copy and adapt LandingCatalogo.tsx - update imports to use local components",
      "Create src/components/landing/index.ts barrel export for all components",
      "Run pnpm tsc --noEmit to verify all components compile",
      "Run pnpm lint to check for errors",
      "Run pnpm build to verify production build"
    ],
    "passes": true
  },
  {
    "id": "2.11",
    "category": "page",
    "description": "Implement landing page with real data from services",
    "steps": [
      "Update src/app/(public)/page.tsx",
      "Import and call getUpcomingCourses, getPastCourses from course-service",
      "Import and call getTags from tag-service",
      "Transform Prisma data to component props format if needed",
      "Render LandingCatalogo with real data",
      "Configure hero content (title, subtitle, CTA text)",
      "Configure footer links",
      "Run pnpm tsc --noEmit",
      "Run pnpm lint",
      "Run pnpm build",
      "Test in browser at localhost:3000"
    ],
    "passes": true
  },
  {
    "id": "2.11b",
    "category": "data",
    "description": "Migrate courses and educators from v3 database",
    "steps": [
      "Add V3_DATABASE_URL to .env.local (copy from /home/raphael/desarrollo/tinta-academy-v3/.env)",
      "Create scripts/migration/migrate-educators.ts script",
      "Connect to v3 DB, fetch all Educators",
      "For each v3 Educator: create User (email: {slug}@educator.tinta.academy, role: educator) + Educator in v4",
      "Store mapping of v3 educatorId → v4 educatorId for course migration",
      "Create scripts/migration/migrate-courses.ts script",
      "Connect to v3 DB, fetch all Courses with educator relation",
      "Map CourseType: WSET_NIVEL_X → type=wset + wsetLevel=X, others → lowercase",
      "Map CourseStatus: Anunciado→announced, Inscribiendo→enrolling, Finalizado→finished",
      "Infer modality: default 'presencial' (v3 doesn't have this field)",
      "Map dates: classDates[0]→startDate, classDates[last] or examDate→endDate",
      "Create duration string from totalDuration (e.g., '8 horas')",
      "Use educatorId mapping to set correct v4 educatorId",
      "Run migrate-educators.ts first, then migrate-courses.ts",
      "Verify migrated data in Prisma Studio",
      "Run pnpm tsc --noEmit",
      "Run pnpm lint",
      "Run pnpm build"
    ],
    "passes": true
  },
  {
    "id": "2.12",
    "category": "feature",
    "description": "Wire landing page interactions (filters, scroll, navigation)",
    "steps": [
      "Add URL search params support for filtering (?modality=online&type=wset)",
      "Read filters from URL and pass to data fetching",
      "Wire onFilter callback to update URL params",
      "Wire onHeroCTA to scroll smoothly to catalog section (add id to section)",
      "Wire onLogin callback to navigate to /login",
      "Wire onRegister callback to navigate to /login (same flow for now)",
      "Run pnpm tsc --noEmit",
      "Run pnpm lint",
      "Run pnpm build",
      "Test all interactions in browser"
    ],
    "passes": true
  },
  {
    "id": "2.13",
    "category": "feature",
    "description": "Implement newsletter subscription flow",
    "steps": [
      "Wire onSubscribe callback in Footer or LandingCatalogo",
      "Call subscribeToNewsletter server action on form submit",
      "Show success toast on successful subscription (use sonner or similar)",
      "Show error toast on failure with user-friendly message",
      "Run pnpm tsc --noEmit",
      "Run pnpm lint",
      "Run pnpm build",
      "Test subscription flow in browser"
    ],
    "passes": true
  },
  {
    "id": "2.14",
    "category": "page",
    "description": "Implement full course detail page with modern design",
    "steps": [
      "Add getCourseBySlug function to course-service.ts (include educator relation)",
      "Create src/app/(public)/cursos/[slug]/page.tsx as RSC",
      "Add generateMetadata for SEO (title, description, og:image)",
      "Create src/components/course-detail/CourseDetailPage.tsx with sections:",
      "  - Hero section: title, subtitle (formatted date like 'junio 2025'), course image or gradient background",
      "  - Description Card: course description text",
      "  - Two-column grid: '¿Qué vas a aprender?' + 'Este curso es para vos si' (for WSET courses, use predefined content)",
      "  - Modalidad Card: duration, location, max capacity, exam info (icons: Clock, MapPin, Users, GraduationCap)",
      "  - Fechas Card: startDate, endDate formatted, registration deadline if applicable",
      "  - Inversión Card: priceUSD with 'IVA incluido', list of what's included",
      "  - Educator Card: photo (rounded), name, title, bio",
      "  - CTA Button: 'Inscribite ahora' linking to /cursos/inscripcion/[id] (only if status=enrolling)",
      "  - Requisitos Card: enrollment requirements (for WSET: age 18+, photo ID, no prerequisites)",
      "  - Footer links: políticas de ajuste razonable, políticas generales",
      "Use shadcn/ui Card, Button components - follow project design system (colors from tailwind config)",
      "Use Lucide icons: CalendarDays, Clock, MapPin, Users, GraduationCap, CheckCircle",
      "Make responsive: stack cards on mobile, side-by-side on desktop where appropriate",
      "Wire navigation from CourseCard in catalog to this page",
      "Add 'Volver al catálogo' link at top",
      "Run pnpm tsc --noEmit",
      "Run pnpm lint",
      "Run pnpm build",
      "Test with real course data at localhost:3000/cursos/[slug]"
    ],
    "passes": false
  },
  {
    "id": "2.15",
    "category": "polish",
    "description": "Polish landing page (empty states, responsive, loading)",
    "steps": [
      "Implement empty states: 'No hay cursos programados' when upcomingCourses is empty",
      "Show 'No se encontraron cursos' when filters return no results with 'Limpiar filtros' button",
      "Hide past courses section entirely if empty",
      "Test responsive layout on mobile viewport (375px width)",
      "Verify course grid becomes single column on mobile",
      "Verify hero text is readable on mobile",
      "Verify filter chips wrap properly",
      "Verify footer stacks vertically on mobile",
      "Fix any overflow or spacing issues",
      "Add Suspense boundary around course catalog",
      "Create skeleton loader component for course cards",
      "Run pnpm tsc --noEmit",
      "Run pnpm lint",
      "Run pnpm build",
      "Test loading state with DevTools network throttling"
    ],
    "passes": false
  }
]
