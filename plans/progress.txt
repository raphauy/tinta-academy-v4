# Progress Log - Tinta Academy

This file tracks progress across Ralph sessions. Each entry documents what was implemented, technical decisions, and suggestions for next steps.

---

## 2026-01-06 - Initial Setup

Created Ralph Wiggum infrastructure:
- plans/ralph-once.sh - Human-in-the-loop script
- plans/AGENT.md - Build/test instructions
- plans/progress.txt - This file
- plans/prd/02-landing.json - Milestone 2 PRD

Foundation (Milestone 1) was already implemented:
- NextAuth with OTP login
- App shells for all roles (public, student, educator, admin)
- Basic Prisma schema (User, Student, Educator, OtpToken)
- Routing structure with role-based protection

Next: Start implementing Milestone 2 - Landing & Catalog

---

## 2026-01-06 - Database Schema & API Foundation

**Completed (PRD items 2.01-2.09):**
- Added Course, Tag, and NewsletterSubscription models to Prisma schema
- Created CourseType, CourseModality, and CourseStatus enums  
- Implemented many-to-many relationship between Course and Tag
- Added wsetLevel field for WSET courses
- Enhanced seed script with 3 educators, 6 tags, and 6 sample courses
- Created API routes: /api/courses (with filtering), /api/tags, /api/newsletter

**Technical Notes:**
- Used Prisma migrations instead of db push for better version control
- API routes support query parameters for filtering courses by modality, type, tagIds
- Courses are automatically separated into upcoming vs past based on startDate and status
- Newsletter API uses Zod validation and handles duplicate emails gracefully

**Next Priority:** UI components (CourseCard, CourseCatalog, Hero, Footer)

---

## 2026-01-06 - API Routes Refactor to Server Actions

**Completed (PRD item 2.09b):**
- Replaced API routes (/api/courses, /api/tags, /api/newsletter) with service layer architecture
- Created course-service.ts with getCourses, getUpcomingCourses, getPastCourses functions
- Created tag-service.ts with getTags function  
- Created newsletter-service.ts with subscribe function
- Added subscribeToNewsletter server action in src/app/(public)/actions.ts
- Removed API route files and cleaned up empty directories

**Technical Notes:**
- Services use proper Prisma types (CourseWhereInput, CourseModality, CourseType enums)
- Server action includes Zod validation for email input
- Course filtering logic preserved with proper TypeScript typing
- Architecture now follows Next.js App Router patterns: RSC → Services → Prisma

**Verification:** All checks pass (typecheck, lint, build)

**Next Priority:** UI components implementation (CourseCard, CourseCatalog, Hero, Footer)

---

## 2026-01-06 - Landing UI Components Implementation

**Completed (PRD item 2.10):**
- Created src/types/landing.ts - adapted types from product-plan to work with Prisma Course model
- Implemented all landing components in src/components/landing/:
  - CourseCard.tsx - with Next.js Image optimization and proper Prisma type integration
  - CourseCatalog.tsx - course filtering and catalog display
  - Hero.tsx - cinematic hero section with background image
  - Header.tsx - responsive navigation header
  - Footer.tsx - full institutional footer with newsletter subscription
  - LandingCatalogo.tsx - main landing page component orchestrating all sections
- Created index.ts barrel export for clean imports
- Fixed all ESLint warnings (Next.js Image usage, unused variables)

**Technical Notes:**
- Used Next.js Image component for optimized loading instead of regular img tags
- Adapted original product-plan types to match Prisma model structure (Date types, relation structure)
- Course cards display educator info from embedded relation, not separate lookup
- Removed unused educator parameter passing through component tree
- All components are client components due to React hooks usage ('use client' directive)

**Verification:** All checks pass (typecheck, lint, build)

**Next Priority:** Implement landing page with real data from services (PRD 2.11)

---
